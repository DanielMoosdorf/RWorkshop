<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Datenverarbeitung | R Workshop - Sozialwissenschaften</title>
  <meta name="description" content="Einführung in R" />
  <meta name="generator" content="bookdown 0.22.2 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Datenverarbeitung | R Workshop - Sozialwissenschaften" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Einführung in R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Datenverarbeitung | R Workshop - Sozialwissenschaften" />
  
  <meta name="twitter:description" content="Einführung in R" />
  

<meta name="author" content="Yannick Diehl und Daniel Moosdorf" />


<meta name="date" content="2021-05-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="programmiersprache-r.html"/>

<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Workshop</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#voraussetzungen"><i class="fa fa-check"></i><b>0.1</b> Voraussetzungen</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#warum-r"><i class="fa fa-check"></i><b>0.2</b> Warum R?</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#was-ist-r"><i class="fa fa-check"></i><b>0.3</b> Was ist R?</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#aller-einstieg-ist-schwer"><i class="fa fa-check"></i><b>0.4</b> Aller Einstieg ist schwer?!</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#typographie"><i class="fa fa-check"></i><b>0.5</b> Typographie</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#weiterführende-literatur"><i class="fa fa-check"></i><b>0.6</b> Weiterführende Literatur</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>1</b> RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="rstudio.html"><a href="rstudio.html#benutzeroberfläche"><i class="fa fa-check"></i><b>1.1</b> Benutzeroberfläche</a></li>
<li class="chapter" data-level="1.2" data-path="rstudio.html"><a href="rstudio.html#optionen"><i class="fa fa-check"></i><b>1.2</b> Optionen</a></li>
<li class="chapter" data-level="1.3" data-path="rstudio.html"><a href="rstudio.html#konsole"><i class="fa fa-check"></i><b>1.3</b> Konsole</a></li>
<li class="chapter" data-level="1.4" data-path="rstudio.html"><a href="rstudio.html#environment-und-history"><i class="fa fa-check"></i><b>1.4</b> Environment und History</a></li>
<li class="chapter" data-level="1.5" data-path="rstudio.html"><a href="rstudio.html#files"><i class="fa fa-check"></i><b>1.5</b> Files</a></li>
<li class="chapter" data-level="1.6" data-path="rstudio.html"><a href="rstudio.html#packages"><i class="fa fa-check"></i><b>1.6</b> Packages</a></li>
<li class="chapter" data-level="1.7" data-path="rstudio.html"><a href="rstudio.html#help"><i class="fa fa-check"></i><b>1.7</b> Help</a></li>
<li class="chapter" data-level="1.8" data-path="rstudio.html"><a href="rstudio.html#arbeiten-mit-rstudio"><i class="fa fa-check"></i><b>1.8</b> Arbeiten mit RStudio</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="rstudio.html"><a href="rstudio.html#projects"><i class="fa fa-check"></i><b>1.8.1</b> Projects</a></li>
<li class="chapter" data-level="1.8.2" data-path="rstudio.html"><a href="rstudio.html#konsole-oder-rscript"><i class="fa fa-check"></i><b>1.8.2</b> Konsole oder RScript?</a></li>
<li class="chapter" data-level="1.8.3" data-path="rstudio.html"><a href="rstudio.html#tab-completion"><i class="fa fa-check"></i><b>1.8.3</b> Tab completion</a></li>
<li class="chapter" data-level="1.8.4" data-path="rstudio.html"><a href="rstudio.html#nützliche-tastenbefehle-shortcuts"><i class="fa fa-check"></i><b>1.8.4</b> Nützliche Tastenbefehle (Shortcuts)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html"><i class="fa fa-check"></i><b>2</b> Programmiersprache R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#variablen-definieren"><i class="fa fa-check"></i><b>2.1</b> Variablen definieren</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#variablennamen"><i class="fa fa-check"></i><b>2.1.1</b> Variablennamen</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#funktionen-aufrufen"><i class="fa fa-check"></i><b>2.2</b> Funktionen aufrufen</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#verschachtelung-von-funktionen"><i class="fa fa-check"></i><b>2.2.1</b> Verschachtelung von Funktionen</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#objekte-und-datentypen"><i class="fa fa-check"></i><b>2.3</b> Objekte und Datentypen</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#vektoren-vector"><i class="fa fa-check"></i><b>2.3.1</b> Vektoren (vector)</a></li>
<li class="chapter" data-level="2.3.2" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#faktoren-factor"><i class="fa fa-check"></i><b>2.3.2</b> Faktoren (factor)</a></li>
<li class="chapter" data-level="2.3.3" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#datensatz-data-frame"><i class="fa fa-check"></i><b>2.3.3</b> Datensatz (data frame)</a></li>
<li class="chapter" data-level="2.3.4" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#listen-list"><i class="fa fa-check"></i><b>2.3.4</b> Listen (list)</a></li>
<li class="chapter" data-level="2.3.5" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#weitere-datentypen"><i class="fa fa-check"></i><b>2.3.5</b> Weitere Datentypen</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="programmiersprache-r.html"><a href="programmiersprache-r.html#pipe-operatoren"><i class="fa fa-check"></i><b>2.4</b> Pipe Operatoren</a>
<ul>
<li><a href="programmiersprache-r.html#operator"><code>%&gt;% Operator</code></a></li>
<li><a href="programmiersprache-r.html#operator-1"><code>%$% Operator</code></a></li>
<li><a href="programmiersprache-r.html#t-operator"><code>%T&gt;% Operator</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html"><i class="fa fa-check"></i><b>3</b> Datenverarbeitung</a>
<ul>
<li class="chapter" data-level="3.1" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#vorbereitung"><i class="fa fa-check"></i><b>3.1</b> Vorbereitung</a></li>
<li class="chapter" data-level="3.2" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#datensatz-importieren"><i class="fa fa-check"></i><b>3.2</b> Datensatz importieren</a></li>
<li class="chapter" data-level="3.3" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#erster-blick-auf-den-datensatz"><i class="fa fa-check"></i><b>3.3</b> Erster Blick auf den Datensatz</a></li>
<li class="chapter" data-level="3.4" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#datensatz-restrukturieren"><i class="fa fa-check"></i><b>3.4</b> Datensatz restrukturieren</a>
<ul>
<li><a href="datenverarbeitung.html#select"><code>Select()</code></a></li>
<li><a href="datenverarbeitung.html#filter"><code>Filter()</code></a></li>
<li><a href="datenverarbeitung.html#arrange"><code>Arrange()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#daten-konvertieren"><i class="fa fa-check"></i><b>3.5</b> Daten konvertieren</a>
<ul>
<li><a href="datenverarbeitung.html#to_factor"><code>To_factor()</code></a></li>
<li><a href="datenverarbeitung.html#to_label"><code>To_label()</code></a></li>
<li><a href="datenverarbeitung.html#to_numeric"><code>To_numeric()</code></a></li>
<li><a href="datenverarbeitung.html#to_character"><code>To_character()</code></a></li>
<li><a href="datenverarbeitung.html#numeric_to_factor"><code>Numeric_to_factor()</code></a></li>
<li><a href="datenverarbeitung.html#unlabel"><code>Unlabel()</code></a></li>
<li><a href="datenverarbeitung.html#ref_lvl"><code>Ref_lvl()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#daten-beschriften"><i class="fa fa-check"></i><b>3.6</b> Daten beschriften</a>
<ul>
<li><a href="datenverarbeitung.html#get_label"><code>Get_label()</code></a></li>
<li><a href="datenverarbeitung.html#get_labels"><code>Get_labels()</code></a></li>
<li><a href="datenverarbeitung.html#remove_label"><code>Remove_label()</code></a></li>
<li><a href="datenverarbeitung.html#remove_labels"><code>Remove_labels()</code></a></li>
<li><a href="datenverarbeitung.html#remove_all_labels"><code>Remove_all_labels()</code></a></li>
<li><a href="datenverarbeitung.html#var_labels"><code>Var_labels()</code></a></li>
<li><a href="datenverarbeitung.html#val_labels"><code>Val_labels()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="datenverarbeitung.html"><a href="datenverarbeitung.html#daten-manipulieren"><i class="fa fa-check"></i><b>3.7</b> Daten manipulieren</a>
<ul>
<li><a href="datenverarbeitung.html#rename"><code>Rename()</code></a></li>
<li><a href="datenverarbeitung.html#mutate"><code>Mutate()</code></a></li>
<li><a href="datenverarbeitung.html#group_by"><code>Group_by()</code></a></li>
<li><a href="datenverarbeitung.html#set_na"><code>Set_na()</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Workshop - Sozialwissenschaften</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="datenverarbeitung" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Datenverarbeitung</h1>
<p>In diesem Kapitel werden wir in einem ersten Schritt das Einlesen von Datensätzen in den geläufigen Datenstrurkturen kennenlernen, um in einem zweiten Schritt die Daten nach unseren Vorstellungen zu modifizieren.</p>
<p><strong>Tipp:</strong> Zur Erstellung eigener Datensätze empfehlen wir das Kapitel <a href="https://methodenlehre.github.io/einfuehrung-in-R/datensätze.html#datensätze-selber-erstellen">Datensätze selber erstellen</a> von Andrew Ellis und Boris Mayer.</p>
<p>Wie Eingangs erwähnt, arbeiten wir in diesem Kurs mit den Ökosystemen <em>tidyverse</em> und <em>strengejacke</em>, um Daten umfänglich modifizieren zu können. Natürlich gibt es auch andere Möglichkeiten der Datenbearbeitung. Wir sind aber davon überzeugt, dass die “tidyverse-Methode,” an die sich auch strengejacke anschließt, eine sehr konsistente und eingängige Form des Arbeitens ermöglicht.</p>
<p>Wie wir später noch sehen werden, erfordern viele Arten von statistischen Analysen und insbesondere Grafik-Funktionen einen Datensatz im <em>long</em>-Format. So muss mitunter erstaunlich viel Zeit für die Organisation von Daten für die weitere Analyse aufgewendet werden (diese Art von Arbeit wird oft als “data wrangling” bezeichnet). Sofern Sie einen Datensatz im <em>wide</em>-Format in ein <em>long</em>-Format transformieren wollen, empfehlen wir das Kapitel: <a href="https://methodenlehre.github.io/einfuehrung-in-R/daten-transformieren.html#reshaping-tidyr">Reshaping: tidyr</a> von Andrew Ellis und Boris Mayer.</p>
<div id="vorbereitung" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Vorbereitung</h2>
<p>Wir wollen mit dem Allbus-Datensatz (Allgemeine Bevölkerungsumfrage der Sozialwissenschaften) von 2018 arbeiten. Dieser lässt sich über GESIS unter: <a href="https://www.gesis.org/allbus/inhalte-suche/studienprofile-1980-bis-2018/2018">Allbus 2018</a> herunterladen. Der Allbus 2018 liegt gleich im <em>long</em>-Format vor.</p>
<p><strong>Anmerkung:</strong> Der Allbus 2018 ist eine standardisierte Bevölkerungsbefragung mit überproportionaler Repräsentanz von Befragten aus den neuen Bundesländern. Um diesem Umstand gerecht zu werden, müssen die Daten des Allbus gewichtet werden. Eine ideale Voraussetzung für diesen Kurs.</p>
<p>Wir wollen unserem Anspruch einer zielgerichteten und forschungspraktischen Anwendung von R auch während der Bearbeitung des Allbus 2018, als Datengrundlage, gerecht werden. So greifen wir auf vergangene Forschungspublikationen zurück. Diese erlauben uns eine Orientierungslinie für kommende Beispiele zu ziehen.</p>
<p>Folgend erstellen wir ein Projekt in RStudio (siehe 1.8.1). Sobald der Projektordner erstellt wurde, schieben wir unseren Datensatz in den Projektordner. Durch die Festlegung unseres Arbeitsverzeichnises im Projektordner, kann R direkt auf den Datensatz zugreifen. Der Reiter <code>Files</code> sollte entsprechend so aussehen:</p>
<p><img src="Bilder/Files2.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Abschließend erstellen wir ein RScript (siehe 1.8.2) und laden unsere Packete: tidyverse, strengejacke und easystats (siehe 1.6).</p>
<p>Voila! Nun können wir den Datensatz einlesen.</p>
</div>
<div id="datensatz-importieren" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Datensatz importieren</h2>
<p>Durch das Packet <em>sjlabelled</em> aus dem Packet <em>strengejacke</em> können wir drei verschiedene Dateiformate einlesen.</p>
<ul>
<li>.sav &gt; SPSS</li>
<li>.dta &gt; Stata</li>
<li>.sas &gt; SAS</li>
</ul>
<p>Da wir den Allbus 2018 in .sav vorliegen haben, benutzen wir die folgende Funktion.</p>
<pre><code># SPSS
allbus2018 &lt;- read_spss(&quot;ALLB2018.sav&quot;)</code></pre>
<p><strong>Wichtig!</strong> Mit der Funktion <code>read_spss()</code> über das Packet sjlabelled werden alle fehlenden Werte zu <code>NA</code> konvertiert. Sofern Sie mit fehlenden Werten arbeiten wollen, empfehlen wir gegenwärtig noch das Packet <code>haven</code> über die Funktion <code>read_sav()</code> und dem Argument <code>user_na = TRUE</code> zu nutzen. Hier ist aber zu beachten, dass alle Vektoren unter der Klasse <code>labelled_spss</code> gespeichert werden. Das kann zu Problemen mit Funktionen aus externen Packeten führen. Eine Lösung wäre vorher die betreffenden Vektoren händisch in atomare Strukturen zu konvertieren (z.B. durch <code>unlabel()</code> aus sjlabelled). Zudem müssen dann alle fehlenden Werte händisch als <code>NA</code> makiert werden (<code>set_na()</code> aus sjlabelled). <em>Dazu aber später mehr!</em></p>
<p>Sollten Ihre Daten in .dta oder .sas vorliegen, können Sie die folgenden Befehle nutzen.</p>
<pre><code># Stata
allbus2018 &lt;- read_stata(&quot;Datensatz.dta&quot;)

# SAS
allbus2018 &lt;- read_sas(&quot;Datensatz.sas&quot;)</code></pre>
<p><strong>Anmerkung:</strong> Sollten Sie andere Dateiformate nutzen wollen, bieten sich zudem die Packete <code>haven</code>, <code>readxl</code> und <code>readr</code> an.</p>
<p>Die Funktion <code>read_spss</code> besitzt vier für uns relevante Argumente. Einen Überblick über die möglichen Argumente findet sich unter: <code>?read_spss</code>.</p>
<ul>
<li><code>atomic.to.fac</code> = <code>TRUE</code> &gt; Alle Variablen mit beschrifteten Ausprägungsmerkmalen werden zu Faktoren konvertiert. Für uns ist dieses Argument offensichtlich unbrauchbar, da wir viele Items vom Likert-Typ im Allbus 2018 vorfinden und diese als pseudo-metrisch behandeln wollen.</li>
<li><code>drop.labels</code> = <code>TRUE</code> &gt; Alle Ausprägungsmerkmale ohne Fälle werden gelöscht. Eine nützliche Funktion, sofern wir nicht mit fehlenden Werten arbeiten möchten. Durch <code>read_spss()</code> über das Packet sjlabelled wurden ohnehin alle vormalig fehlenden Werte zu <code>NA</code> konvertiert. So können wir die überflüssigen Ausprägungsmerkmale einfach löschen.</li>
<li><code>verbose</code> = <code>TRUE</code> &gt; Es wird beim Verarbeiten der Daten ein Fortschrittsbalken eingeblendet. Nur bei großen Datensätzen relevant.</li>
<li><code>tag.na</code> = <code>TRUE</code> &gt; Alle fehlenden Werte werden als <code>tagged_na</code> markiert. Damit werden sie in allen Berechnungen zwar als <code>NA</code> einbezogen, der große Vorteil dieses Vorgehens liegt aber im Erhalt der ursprünglichen Kodierung jener fehlenden Werte. Wir können also wie aus <code>SPSS</code> bekannt, jederzeit auf diese mit der Funktion <code>replace_na()</code> zugreifen und sie als reguläre Werte in unsere Berechungen aufnehmen. Leider funktioniert dieses Argument gegenwärtig nur mit positiven Kodierungsmerkmalen (z.B. 98, 99), aber nicht mit negativen Ausprägungsformen (-7, -8). <em>Wir hoffen auf eine baldige Anpassung und stehen mit den Entwicklern im Kontakt</em>.</li>
</ul>
<p>Damit empfehlen wir das Argument <code>dop.labels</code> mit <code>TRUE bzw. T</code> zu aktivieren.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="datenverarbeitung.html#cb52-1" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="ot">&lt;-</span> <span class="fu">read_spss</span>(<span class="st">&quot;ALLB2018.sav&quot;</span>, <span class="at">drop.labels =</span> T)</span>
<span id="cb52-2"><a href="datenverarbeitung.html#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="datenverarbeitung.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Noch schnell den Allbus zum tibble transformieren</span></span>
<span id="cb52-4"><a href="datenverarbeitung.html#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="datenverarbeitung.html#cb52-5" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(allbus2018)</span></code></pre></div>
<p>Hervorragend! Damit haben wir erfolgreich unsere Daten in R importiert.</p>
<p>Um bearbeitete Datensätze zu speichern, bietet sich der folgende Befehl an.</p>
<pre><code>write_spss(allbus2018, path = &quot;allbus2018&quot;)</code></pre>
<p>Die Datei wird automatisch in unserem Projektordner abgelegt. Wir können aber auch über das Argument <code>path</code> einen neuen Speicherort definieren.</p>
</div>
<div id="erster-blick-auf-den-datensatz" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Erster Blick auf den Datensatz</h2>
<p>Nachdem wir unseren Datensatz eingelesen haben, wollen wir uns zu Beginn einen Überblick über die vorhandenen Daten verschaffen.</p>
<p>Mit <code>view()</code> können wir den ganzen Datensatz als zusätzliches Fenster öffnen.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="datenverarbeitung.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(allbus2018)</span></code></pre></div>
<p>Über den Befehl <code>view_df()</code> wird uns eine HTML-Version unseres Datensatzes im <code>Viewer</code> angezeigt.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="datenverarbeitung.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view_df</span>(allbus2018)</span></code></pre></div>
<p>Der große Vorteil der zweiten Abbildung liegt offensichtlich in der reduzierten Darstellung. So können wir über die Spalte <code>ID</code> ablesen, welchen Wert unsere Variablen im Spaltenvektor des Datensatzes innehaben. Wir können entsprechend Variablen über diesen indizieren. Zudem wird uns die Variablenbezeichnung über <code>Name</code>, die Variablenbeschriftung über <code>Label</code> und die Ausprägungsmerkmale bzw. Spannweite über <code>Values</code>, sowie die Merkmalsbeschriftung über <code>Value Labels</code> ausgegeben.</p>
<p>Weiterhin können wir über unsere zuvor erlernten “Grundfunktionen” einen Ausschnitt des Datensatzes generieren.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="datenverarbeitung.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ersten 3 Fälle</span></span>
<span id="cb56-2"><a href="datenverarbeitung.html#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="datenverarbeitung.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(allbus2018, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb56-4"><a href="datenverarbeitung.html#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="datenverarbeitung.html#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Letzten 5 Fälle</span></span>
<span id="cb56-6"><a href="datenverarbeitung.html#cb56-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-7"><a href="datenverarbeitung.html#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(allbus2018, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb56-8"><a href="datenverarbeitung.html#cb56-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-9"><a href="datenverarbeitung.html#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Ganzer Datensatz</span></span>
<span id="cb56-10"><a href="datenverarbeitung.html#cb56-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-11"><a href="datenverarbeitung.html#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(allbus2018)</span></code></pre></div>
<p>Die Anwendung unserer Grundfunktionen hat gegenwärtig noch den großen Nachteil, dass R versucht alle Variablen unseres Datensatzes abzubilden. Um das in den Griff zu bekommen, wollen wir uns in den folgenden Kapiteln mit der Datensatztransformation und dann Datenmanipulation beschäftigen.</p>
</div>
<div id="datensatz-restrukturieren" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Datensatz restrukturieren</h2>
<p><strong>Anmerkung:</strong> Ab jetzt werden wir mit dem Allbus 2018 arbeiten. Um die folgenden Befehle nachvollziehen zu können, sollte Sie den Datensatz entsprechend eingelesen haben.</p>
<p>Gemäß unseres forschungspraktischen Anspruchs stammen die kommenden Variablen aus einer Untersuchung politischen Wissens (Moosdorf 2020) in Bearbeitung des Allbus 2018.</p>
<p><strong>Kurze Erläuterung des Forschungsinhalts</strong></p>
<p>R verspricht eine enorme Flexibilität im Umgang mit Daten. Unmittelbar spürbar wird dieser Umstand in der Reorganisation von Datensätzen in neuen Objekten (gezielt aufgebaute eigene Datensätze). So wollen wir in einem ersten Schritt lernen, wie wir Datensätze grob restrukturieren und anschließend die Daten in einem neuen Datensatz speichern können. Unser Ziel ist es also einen eigenen, auf unsere Bedürfnisse zugeschnittenen, Datensatz zu erzeugen. Hierfür straten wir mit den folgenden Funktionen:</p>
<table>
<thead>
<tr class="header">
<th align="left">Packet</th>
<th align="left">Funktion</th>
<th align="left">Verwendung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dplyr</td>
<td align="left">select()</td>
<td align="left">Selektieren von Variablen</td>
</tr>
<tr class="even">
<td align="left">dplyr</td>
<td align="left">filter()</td>
<td align="left">Filtern nach Fällen mit spezifischer Ausprägung</td>
</tr>
<tr class="odd">
<td align="left">dplyr</td>
<td align="left">arrange()</td>
<td align="left">Sortiert Datensatz nach bestimmter Variable</td>
</tr>
</tbody>
</table>
<p>Das dplyr Package stellt Funktionen für alle diese Aufgaben zur Verfügung (und noch viele mehr, wir betrachten hier nur eine kleine Auswahl). dplyr besteht sozusagen aus Verben (Funktionen) für all diese Operationen, und diese Funktionen können - je nach Bedarf - auf sehr elegante Weise zusammengesetzt werden.</p>
<p>Wir sehen uns nun der Reihe nach die verschiedenen Funktionen und deren Verwendung an. Wir verwenden immer den <code>%&gt;%</code> Operator. Der Input Datensatz ist dabei immer als erstes Argument der Funktion zu verstehen.</p>
<div id="select" class="section level3 unnumbered">
<h3><code>Select()</code></h3>
<p>Mit der Funktion <code>select()</code> lassen sich Variablen aus einem Datensatz gezielt auswählen.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
select(datensatz, variable1, variable2:variable3, -variable4)

# Mit Pipe
datensatz %&gt;% 
  select(variable1, variable2:variable3, -variable4)</code></pre>
<p>Mit dem Befehl <code>select()</code> wurden aus dem Datensatz <code>datensatz</code> die Variablen <code>variable1</code>, <code>variable2</code> bis <code>variable3</code> ausgewählt. <code>variable4</code> wurde weggelassen.</p>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="datenverarbeitung.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nur Einstellung zu Leistungsprinzip (im19) im neuen Datensatz ds speichern</span></span>
<span id="cb58-2"><a href="datenverarbeitung.html#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="datenverarbeitung.html#cb58-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="datenverarbeitung.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19)</span>
<span id="cb58-5"><a href="datenverarbeitung.html#cb58-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-6"><a href="datenverarbeitung.html#cb58-6" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb58-7"><a href="datenverarbeitung.html#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,477 x 1</span></span>
<span id="cb58-8"><a href="datenverarbeitung.html#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     im19</span></span>
<span id="cb58-9"><a href="datenverarbeitung.html#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt;</span></span>
<span id="cb58-10"><a href="datenverarbeitung.html#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     4</span></span>
<span id="cb58-11"><a href="datenverarbeitung.html#cb58-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     4</span></span>
<span id="cb58-12"><a href="datenverarbeitung.html#cb58-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     2</span></span>
<span id="cb58-13"><a href="datenverarbeitung.html#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     4</span></span>
<span id="cb58-14"><a href="datenverarbeitung.html#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     4</span></span>
<span id="cb58-15"><a href="datenverarbeitung.html#cb58-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     2</span></span>
<span id="cb58-16"><a href="datenverarbeitung.html#cb58-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     4</span></span>
<span id="cb58-17"><a href="datenverarbeitung.html#cb58-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     4</span></span>
<span id="cb58-18"><a href="datenverarbeitung.html#cb58-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     3</span></span>
<span id="cb58-19"><a href="datenverarbeitung.html#cb58-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     4</span></span>
<span id="cb58-20"><a href="datenverarbeitung.html#cb58-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,467 more rows</span></span>
<span id="cb58-21"><a href="datenverarbeitung.html#cb58-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-22"><a href="datenverarbeitung.html#cb58-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Einstellungen zum Leistungsprinzip (im19) und Befürwortung von Ungleichheit (im20) </span></span>
<span id="cb58-23"><a href="datenverarbeitung.html#cb58-23" aria-hidden="true" tabindex="-1"></a><span class="co"># in ds speichern</span></span>
<span id="cb58-24"><a href="datenverarbeitung.html#cb58-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-25"><a href="datenverarbeitung.html#cb58-25" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb58-26"><a href="datenverarbeitung.html#cb58-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19, im20)</span>
<span id="cb58-27"><a href="datenverarbeitung.html#cb58-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-28"><a href="datenverarbeitung.html#cb58-28" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb58-29"><a href="datenverarbeitung.html#cb58-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,477 x 2</span></span>
<span id="cb58-30"><a href="datenverarbeitung.html#cb58-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     im19  im20</span></span>
<span id="cb58-31"><a href="datenverarbeitung.html#cb58-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb58-32"><a href="datenverarbeitung.html#cb58-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     4     2</span></span>
<span id="cb58-33"><a href="datenverarbeitung.html#cb58-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     4     4</span></span>
<span id="cb58-34"><a href="datenverarbeitung.html#cb58-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     2     3</span></span>
<span id="cb58-35"><a href="datenverarbeitung.html#cb58-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     4     2</span></span>
<span id="cb58-36"><a href="datenverarbeitung.html#cb58-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     4     4</span></span>
<span id="cb58-37"><a href="datenverarbeitung.html#cb58-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     2     2</span></span>
<span id="cb58-38"><a href="datenverarbeitung.html#cb58-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     4     4</span></span>
<span id="cb58-39"><a href="datenverarbeitung.html#cb58-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     4     3</span></span>
<span id="cb58-40"><a href="datenverarbeitung.html#cb58-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     3     2</span></span>
<span id="cb58-41"><a href="datenverarbeitung.html#cb58-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     4     3</span></span>
<span id="cb58-42"><a href="datenverarbeitung.html#cb58-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,467 more rows</span></span>
<span id="cb58-43"><a href="datenverarbeitung.html#cb58-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-44"><a href="datenverarbeitung.html#cb58-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Befürwortung von Ungleichheit (im20) aus ds löschen</span></span>
<span id="cb58-45"><a href="datenverarbeitung.html#cb58-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-46"><a href="datenverarbeitung.html#cb58-46" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb58-47"><a href="datenverarbeitung.html#cb58-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>im20)</span>
<span id="cb58-48"><a href="datenverarbeitung.html#cb58-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-49"><a href="datenverarbeitung.html#cb58-49" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb58-50"><a href="datenverarbeitung.html#cb58-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,477 x 1</span></span>
<span id="cb58-51"><a href="datenverarbeitung.html#cb58-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     im19</span></span>
<span id="cb58-52"><a href="datenverarbeitung.html#cb58-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt;</span></span>
<span id="cb58-53"><a href="datenverarbeitung.html#cb58-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     4</span></span>
<span id="cb58-54"><a href="datenverarbeitung.html#cb58-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     4</span></span>
<span id="cb58-55"><a href="datenverarbeitung.html#cb58-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     2</span></span>
<span id="cb58-56"><a href="datenverarbeitung.html#cb58-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     4</span></span>
<span id="cb58-57"><a href="datenverarbeitung.html#cb58-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     4</span></span>
<span id="cb58-58"><a href="datenverarbeitung.html#cb58-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     2</span></span>
<span id="cb58-59"><a href="datenverarbeitung.html#cb58-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     4</span></span>
<span id="cb58-60"><a href="datenverarbeitung.html#cb58-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     4</span></span>
<span id="cb58-61"><a href="datenverarbeitung.html#cb58-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     3</span></span>
<span id="cb58-62"><a href="datenverarbeitung.html#cb58-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     4</span></span>
<span id="cb58-63"><a href="datenverarbeitung.html#cb58-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,467 more rows</span></span>
<span id="cb58-64"><a href="datenverarbeitung.html#cb58-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-65"><a href="datenverarbeitung.html#cb58-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Auswahl von Einstellung zum Leistungsprinzip (im19) </span></span>
<span id="cb58-66"><a href="datenverarbeitung.html#cb58-66" aria-hidden="true" tabindex="-1"></a><span class="co"># über Befürwortung von Ungleichheit (im20)</span></span>
<span id="cb58-67"><a href="datenverarbeitung.html#cb58-67" aria-hidden="true" tabindex="-1"></a><span class="co"># bis Einstellung zu sozialer Ungleichheit auf Makroebene (im21) und Mikroebene (id01)</span></span>
<span id="cb58-68"><a href="datenverarbeitung.html#cb58-68" aria-hidden="true" tabindex="-1"></a><span class="co"># in ds speichern</span></span>
<span id="cb58-69"><a href="datenverarbeitung.html#cb58-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-70"><a href="datenverarbeitung.html#cb58-70" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb58-71"><a href="datenverarbeitung.html#cb58-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19<span class="sc">:</span>im21, id01)</span>
<span id="cb58-72"><a href="datenverarbeitung.html#cb58-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-73"><a href="datenverarbeitung.html#cb58-73" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb58-74"><a href="datenverarbeitung.html#cb58-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,477 x 4</span></span>
<span id="cb58-75"><a href="datenverarbeitung.html#cb58-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     im19  im20  im21  id01</span></span>
<span id="cb58-76"><a href="datenverarbeitung.html#cb58-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb58-77"><a href="datenverarbeitung.html#cb58-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     4     2     3     3</span></span>
<span id="cb58-78"><a href="datenverarbeitung.html#cb58-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     4     4     4     2</span></span>
<span id="cb58-79"><a href="datenverarbeitung.html#cb58-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     2     3     3     3</span></span>
<span id="cb58-80"><a href="datenverarbeitung.html#cb58-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     4     2     2     3</span></span>
<span id="cb58-81"><a href="datenverarbeitung.html#cb58-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     4     4     4     2</span></span>
<span id="cb58-82"><a href="datenverarbeitung.html#cb58-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     2     2     3     3</span></span>
<span id="cb58-83"><a href="datenverarbeitung.html#cb58-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     4     4     3     3</span></span>
<span id="cb58-84"><a href="datenverarbeitung.html#cb58-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     4     3     3     2</span></span>
<span id="cb58-85"><a href="datenverarbeitung.html#cb58-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     3     2     2     3</span></span>
<span id="cb58-86"><a href="datenverarbeitung.html#cb58-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     4     3     4     3</span></span>
<span id="cb58-87"><a href="datenverarbeitung.html#cb58-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,467 more rows</span></span></code></pre></div>
<p>Wir können über <code>select()</code> auch die Reihenfolge unseres Spaltenvektors gezielt bestimmen.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="datenverarbeitung.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reheinfolge des Datensatz ds anpassen</span></span>
<span id="cb59-2"><a href="datenverarbeitung.html#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="datenverarbeitung.html#cb59-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb59-4"><a href="datenverarbeitung.html#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id01, im19, im20, im21)</span>
<span id="cb59-5"><a href="datenverarbeitung.html#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="datenverarbeitung.html#cb59-6" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb59-7"><a href="datenverarbeitung.html#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,477 x 4</span></span>
<span id="cb59-8"><a href="datenverarbeitung.html#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     id01  im19  im20  im21</span></span>
<span id="cb59-9"><a href="datenverarbeitung.html#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb59-10"><a href="datenverarbeitung.html#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     3     4     2     3</span></span>
<span id="cb59-11"><a href="datenverarbeitung.html#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     2     4     4     4</span></span>
<span id="cb59-12"><a href="datenverarbeitung.html#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     3     2     3     3</span></span>
<span id="cb59-13"><a href="datenverarbeitung.html#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     3     4     2     2</span></span>
<span id="cb59-14"><a href="datenverarbeitung.html#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     2     4     4     4</span></span>
<span id="cb59-15"><a href="datenverarbeitung.html#cb59-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     3     2     2     3</span></span>
<span id="cb59-16"><a href="datenverarbeitung.html#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     3     4     4     3</span></span>
<span id="cb59-17"><a href="datenverarbeitung.html#cb59-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     2     4     3     3</span></span>
<span id="cb59-18"><a href="datenverarbeitung.html#cb59-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     3     3     2     2</span></span>
<span id="cb59-19"><a href="datenverarbeitung.html#cb59-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     3     4     3     4</span></span>
<span id="cb59-20"><a href="datenverarbeitung.html#cb59-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,467 more rows</span></span></code></pre></div>
<p><strong>Anmerkung:</strong></p>
<ol style="list-style-type: decimal">
<li><p>Viele Funktionen des tidyverse, auch <code>select()</code>, besitzen zusätzlich Hilfsfunktionen und erweiterte Funktionsvarianten, um gezielt mehrere Variablen nach bestimmten Kriterien einschließen zu können. In Anbetracht der umfänglichen Möglichkeiten dieses Vorgehens, können wir leider in diesem Kurs nicht darauf eingehen. Sofern Sie bedarf für Ihre eigenen Arbeiten sehen, empfehlen wir in der Packetdokumentation nachzusehen unter: <a href="https://dplyr.tidyverse.org/reference/select.html">selection helpers</a> und <a href="https://dplyr.tidyverse.org/reference/scoped.html">scoped verbs</a>.</p></li>
<li><p>Sofern Sie einzelne Variablen im Datensatz verschieben möchten, empfehlen wir die Funktion <code>move_columns()</code> aus dem Packet <em>sjmisc</em>.</p></li>
</ol>
</div>
<div id="filter" class="section level3 unnumbered">
<h3><code>Filter()</code></h3>
<p>Mit der Funktion <code>filter()</code> können wir eine Auswahl von Fällen treffen, die alle eine bestimmte Ausprägung einer Variable besitzen.</p>
<p><strong>Tipp:</strong> Wir kennen diesen Befehl aus SPSS als <code>select if</code>.</p>
<p>Um unsere Daten ausgiebig filtern zu können, müssen wir uns kurz mit den <code>logischen Operatoren</code> in R beschäftigen.</p>
<pre><code>&lt;                Kleiner
&lt;=               Kleiner gleich
&gt;                Grösser
&gt;=               Grösser gleich
==               Gleich (testet auf Äquivalenz)
!=               Ungleich
x | y            x ODER y
x &amp; y            x UND y
xor(x, y)        Exklusives ODER (entweder in x oder y, aber nicht in beiden)</code></pre>
<p>Die <code>logischen Operatoren</code> in R sind recht selbsterklärend und sollten bei eigener Anwendung recht schnell verstanden sein.</p>
<p>Zusätzlich brauchen wir noch einen <code>infix operator</code>.</p>
<pre><code>%in%             Merkmale in einem Vektor</code></pre>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
filter(datensatz, variable1 == 1)

# Mit Pipe
datensatz %&gt;% 
  filter(variable1 == 1)</code></pre>
<p>Mit dem Befehl <code>filter()</code> wurden nur die Fälle des Datensatzes <code>datensatz</code> mit der Ausprägung <code>1</code> der Variable <code>variable1</code> übernommen.</p>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="datenverarbeitung.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Auswahl unserer bekannten Variablen gefiltert nach Personen mit NUR der </span></span>
<span id="cb63-2"><a href="datenverarbeitung.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co"># deutschen Staatsbürgerschaft</span></span>
<span id="cb63-3"><a href="datenverarbeitung.html#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="datenverarbeitung.html#cb63-4" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb63-5"><a href="datenverarbeitung.html#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19<span class="sc">:</span>im21, id01, german) <span class="sc">%&gt;%</span> </span>
<span id="cb63-6"><a href="datenverarbeitung.html#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(german <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb63-7"><a href="datenverarbeitung.html#cb63-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-8"><a href="datenverarbeitung.html#cb63-8" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb63-9"><a href="datenverarbeitung.html#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,218 x 5</span></span>
<span id="cb63-10"><a href="datenverarbeitung.html#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     im19  im20  im21  id01 german</span></span>
<span id="cb63-11"><a href="datenverarbeitung.html#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb63-12"><a href="datenverarbeitung.html#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     4     2     3     3      1</span></span>
<span id="cb63-13"><a href="datenverarbeitung.html#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     4     4     4     2      1</span></span>
<span id="cb63-14"><a href="datenverarbeitung.html#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     2     3     3     3      1</span></span>
<span id="cb63-15"><a href="datenverarbeitung.html#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     4     2     2     3      1</span></span>
<span id="cb63-16"><a href="datenverarbeitung.html#cb63-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     4     4     4     2      1</span></span>
<span id="cb63-17"><a href="datenverarbeitung.html#cb63-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     2     2     3     3      1</span></span>
<span id="cb63-18"><a href="datenverarbeitung.html#cb63-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     4     4     3     3      1</span></span>
<span id="cb63-19"><a href="datenverarbeitung.html#cb63-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     4     3     3     2      1</span></span>
<span id="cb63-20"><a href="datenverarbeitung.html#cb63-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     3     2     2     3      1</span></span>
<span id="cb63-21"><a href="datenverarbeitung.html#cb63-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     4     3     4     3      1</span></span>
<span id="cb63-22"><a href="datenverarbeitung.html#cb63-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,208 more rows</span></span>
<span id="cb63-23"><a href="datenverarbeitung.html#cb63-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-24"><a href="datenverarbeitung.html#cb63-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Auswahl unserer bekannten Variablen gefiltert nach Personen mit der </span></span>
<span id="cb63-25"><a href="datenverarbeitung.html#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="co"># deutschen Staatsbürgerschaft (auch mit weiteren)</span></span>
<span id="cb63-26"><a href="datenverarbeitung.html#cb63-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-27"><a href="datenverarbeitung.html#cb63-27" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb63-28"><a href="datenverarbeitung.html#cb63-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19<span class="sc">:</span>im21, id01, german) <span class="sc">%&gt;%</span> </span>
<span id="cb63-29"><a href="datenverarbeitung.html#cb63-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(german <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb63-30"><a href="datenverarbeitung.html#cb63-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-31"><a href="datenverarbeitung.html#cb63-31" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb63-32"><a href="datenverarbeitung.html#cb63-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,268 x 5</span></span>
<span id="cb63-33"><a href="datenverarbeitung.html#cb63-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     im19  im20  im21  id01 german</span></span>
<span id="cb63-34"><a href="datenverarbeitung.html#cb63-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb63-35"><a href="datenverarbeitung.html#cb63-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     4     2     3     3      1</span></span>
<span id="cb63-36"><a href="datenverarbeitung.html#cb63-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     4     4     4     2      1</span></span>
<span id="cb63-37"><a href="datenverarbeitung.html#cb63-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     2     3     3     3      1</span></span>
<span id="cb63-38"><a href="datenverarbeitung.html#cb63-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     4     2     2     3      1</span></span>
<span id="cb63-39"><a href="datenverarbeitung.html#cb63-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     4     4     4     2      1</span></span>
<span id="cb63-40"><a href="datenverarbeitung.html#cb63-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     2     2     3     3      1</span></span>
<span id="cb63-41"><a href="datenverarbeitung.html#cb63-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     4     4     3     3      1</span></span>
<span id="cb63-42"><a href="datenverarbeitung.html#cb63-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     4     3     3     2      1</span></span>
<span id="cb63-43"><a href="datenverarbeitung.html#cb63-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     3     2     2     3      1</span></span>
<span id="cb63-44"><a href="datenverarbeitung.html#cb63-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     4     3     4     3      1</span></span>
<span id="cb63-45"><a href="datenverarbeitung.html#cb63-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,258 more rows</span></span>
<span id="cb63-46"><a href="datenverarbeitung.html#cb63-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-47"><a href="datenverarbeitung.html#cb63-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Auswahl unserer bekannten Variablen gefiltert nach Personen mit der </span></span>
<span id="cb63-48"><a href="datenverarbeitung.html#cb63-48" aria-hidden="true" tabindex="-1"></a><span class="co"># deutschen Staatsbürgerschaft (auch mit weiteren) und weiblichem Geschlecht</span></span>
<span id="cb63-49"><a href="datenverarbeitung.html#cb63-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-50"><a href="datenverarbeitung.html#cb63-50" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb63-51"><a href="datenverarbeitung.html#cb63-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19<span class="sc">:</span>im21, id01, german, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb63-52"><a href="datenverarbeitung.html#cb63-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(german <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb63-53"><a href="datenverarbeitung.html#cb63-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-54"><a href="datenverarbeitung.html#cb63-54" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb63-55"><a href="datenverarbeitung.html#cb63-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1,610 x 6</span></span>
<span id="cb63-56"><a href="datenverarbeitung.html#cb63-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     im19  im20  im21  id01 german   sex</span></span>
<span id="cb63-57"><a href="datenverarbeitung.html#cb63-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb63-58"><a href="datenverarbeitung.html#cb63-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     4     4     4     2      1     2</span></span>
<span id="cb63-59"><a href="datenverarbeitung.html#cb63-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     4     4     4     2      1     2</span></span>
<span id="cb63-60"><a href="datenverarbeitung.html#cb63-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     4     4     3     3      1     2</span></span>
<span id="cb63-61"><a href="datenverarbeitung.html#cb63-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     3     2     2     3      1     2</span></span>
<span id="cb63-62"><a href="datenverarbeitung.html#cb63-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     4     3     4     3      1     2</span></span>
<span id="cb63-63"><a href="datenverarbeitung.html#cb63-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     2    NA     4     2      1     2</span></span>
<span id="cb63-64"><a href="datenverarbeitung.html#cb63-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     4     2     3     2      1     2</span></span>
<span id="cb63-65"><a href="datenverarbeitung.html#cb63-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     2     3     4     2      1     2</span></span>
<span id="cb63-66"><a href="datenverarbeitung.html#cb63-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     2     2     4    NA      1     2</span></span>
<span id="cb63-67"><a href="datenverarbeitung.html#cb63-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     2     3     3     2      1     2</span></span>
<span id="cb63-68"><a href="datenverarbeitung.html#cb63-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 1,600 more rows</span></span></code></pre></div>
</div>
<div id="arrange" class="section level3 unnumbered">
<h3><code>Arrange()</code></h3>
<p>Mit <code>arrange()</code> können wir Beobachtungen sortieren, entweder in aufsteigender oder in absteigender Reihenfolge.</p>
<p><strong>Syntax:</strong></p>
<pre><code># aufsteigend
arrange(datensatz, variable1)

datensatz %&gt;% 
  arrange(variable1)

# absteigend
arrange(datensatz, desc(variable1))

datensatz %&gt;% 
  arrange(desc(variable1))</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="datenverarbeitung.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sortieren nach Alter aufsteigend</span></span>
<span id="cb65-2"><a href="datenverarbeitung.html#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="datenverarbeitung.html#cb65-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb65-4"><a href="datenverarbeitung.html#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, im19<span class="sc">:</span>im21, id01, german, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb65-5"><a href="datenverarbeitung.html#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(age)</span>
<span id="cb65-6"><a href="datenverarbeitung.html#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="datenverarbeitung.html#cb65-7" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb65-8"><a href="datenverarbeitung.html#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,477 x 7</span></span>
<span id="cb65-9"><a href="datenverarbeitung.html#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      age  im19  im20  im21  id01 german   sex</span></span>
<span id="cb65-10"><a href="datenverarbeitung.html#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb65-11"><a href="datenverarbeitung.html#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1    18     3     1     2     2      1     1</span></span>
<span id="cb65-12"><a href="datenverarbeitung.html#cb65-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2    18     3     3     3     3      1     2</span></span>
<span id="cb65-13"><a href="datenverarbeitung.html#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3    18     3     3     4     3      1     2</span></span>
<span id="cb65-14"><a href="datenverarbeitung.html#cb65-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4    18     3     2     3     3      1     1</span></span>
<span id="cb65-15"><a href="datenverarbeitung.html#cb65-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5    18     4     2     4     2      1     1</span></span>
<span id="cb65-16"><a href="datenverarbeitung.html#cb65-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6    18     2     3     3     3      1     2</span></span>
<span id="cb65-17"><a href="datenverarbeitung.html#cb65-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7    18     2     1     2     2      1     1</span></span>
<span id="cb65-18"><a href="datenverarbeitung.html#cb65-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8    18     2     2     3     3      1     1</span></span>
<span id="cb65-19"><a href="datenverarbeitung.html#cb65-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9    18     2     2     3     3      1     1</span></span>
<span id="cb65-20"><a href="datenverarbeitung.html#cb65-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10    18     2     2     2     3      2     1</span></span>
<span id="cb65-21"><a href="datenverarbeitung.html#cb65-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,467 more rows</span></span>
<span id="cb65-22"><a href="datenverarbeitung.html#cb65-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-23"><a href="datenverarbeitung.html#cb65-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Sortieren nach Alter absteigend</span></span>
<span id="cb65-24"><a href="datenverarbeitung.html#cb65-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-25"><a href="datenverarbeitung.html#cb65-25" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb65-26"><a href="datenverarbeitung.html#cb65-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, im19<span class="sc">:</span>im21, id01, german, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb65-27"><a href="datenverarbeitung.html#cb65-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(age))</span>
<span id="cb65-28"><a href="datenverarbeitung.html#cb65-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-29"><a href="datenverarbeitung.html#cb65-29" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb65-30"><a href="datenverarbeitung.html#cb65-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,477 x 7</span></span>
<span id="cb65-31"><a href="datenverarbeitung.html#cb65-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      age  im19  im20  im21  id01 german   sex</span></span>
<span id="cb65-32"><a href="datenverarbeitung.html#cb65-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb65-33"><a href="datenverarbeitung.html#cb65-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1    95     2     2     2     3      1     1</span></span>
<span id="cb65-34"><a href="datenverarbeitung.html#cb65-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2    94     2     2     3     4      1     1</span></span>
<span id="cb65-35"><a href="datenverarbeitung.html#cb65-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3    94     2     2     3     1      1     1</span></span>
<span id="cb65-36"><a href="datenverarbeitung.html#cb65-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4    92     3     3     4     2      1     2</span></span>
<span id="cb65-37"><a href="datenverarbeitung.html#cb65-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5    92     2     1     2     3      1     2</span></span>
<span id="cb65-38"><a href="datenverarbeitung.html#cb65-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6    92     2     2     2     3      1     2</span></span>
<span id="cb65-39"><a href="datenverarbeitung.html#cb65-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7    92     1     4     4     2      1     1</span></span>
<span id="cb65-40"><a href="datenverarbeitung.html#cb65-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8    92    NA     2     2     2      1     2</span></span>
<span id="cb65-41"><a href="datenverarbeitung.html#cb65-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9    92     2     2     3     3      1     1</span></span>
<span id="cb65-42"><a href="datenverarbeitung.html#cb65-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10    92     2     2     4     3      1     1</span></span>
<span id="cb65-43"><a href="datenverarbeitung.html#cb65-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,467 more rows</span></span></code></pre></div>
</div>
</div>
<div id="daten-konvertieren" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Daten konvertieren</h2>
<p>So wollen wir uns den Funktionen zuwenden, die Datentypen verändern.</p>
<p><strong>Anmerkung:</strong> Wir benutzen die Packete <em>sjmisc</em> und <em>sjlabelled</em> zur Konvertierung von Datentypen, weil die Anwendung der <code>base R</code> Funktionen alle Beschriftungen (siehe 3.3) unseres Datensatzes entfernen würden. Zudem sind alle dargestellten Funktionen für die Nutzung in einer <code>Pipe</code> optimiert.</p>
<table>
<colgroup>
<col width="24%" />
<col width="32%" />
<col width="43%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Packet</th>
<th align="left">Funktion</th>
<th align="left">Verwendung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">sjlabelled</td>
<td align="left">to_factor()</td>
<td align="left">Konvertiert Variable in Faktor mit numerischen <code>levels</code></td>
</tr>
<tr class="even">
<td align="left">sjlabelled</td>
<td align="left">to_label()</td>
<td align="left">Konvertiert Variable in Faktor mit beschrifteten <code>levels</code></td>
</tr>
<tr class="odd">
<td align="left">sjlabelled</td>
<td align="left">to_numeric()</td>
<td align="left">Konvertiert Variable in numerischen Vektor</td>
</tr>
<tr class="even">
<td align="left">sjlabelled</td>
<td align="left">to_character()</td>
<td align="left">Konvertiert Variable in <code>character</code> Vektor</td>
</tr>
<tr class="odd">
<td align="left">sjmisc</td>
<td align="left">numeric_to_factor()</td>
<td align="left">Konvertiert Variablen mit n Ausprägungsmerkmalen zu Faktor</td>
</tr>
<tr class="even">
<td align="left">sjlabelled</td>
<td align="left">unlabel()</td>
<td align="left">Konvertiert <code>labelled class</code> in <code>atomare Struktur</code></td>
</tr>
<tr class="odd">
<td align="left">sjmisc</td>
<td align="left">ref_lvl()</td>
<td align="left">Setzt Referenzkategorie</td>
</tr>
</tbody>
</table>
<div id="to_factor" class="section level3 unnumbered">
<h3><code>To_factor()</code></h3>
<p>Konvertiert einen Vektor in einen Faktor mit numerischen <code>levels</code> - äquivalent zur Funktion <code>factor()</code>. Sinnvoll bei Variablen mit mehr als zwei Ausprägungsmerkmalen.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
to_factor(datensatz$variable1, datensatz$variable2)

# Mit Pipe
datensatz %&gt;% 
  to_factor(variable1, variable2)</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="datenverarbeitung.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Geschlecht unbearbeitet</span></span>
<span id="cb67-2"><a href="datenverarbeitung.html#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="datenverarbeitung.html#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(allbus2018<span class="sc">$</span>sex)</span>
<span id="cb67-4"><a href="datenverarbeitung.html#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numeric&quot;</span></span>
<span id="cb67-5"><a href="datenverarbeitung.html#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="datenverarbeitung.html#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Geschlecht in Faktor mit numerischen levels konvertieren</span></span>
<span id="cb67-7"><a href="datenverarbeitung.html#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="datenverarbeitung.html#cb67-8" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb67-9"><a href="datenverarbeitung.html#cb67-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb67-10"><a href="datenverarbeitung.html#cb67-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_factor</span>(sex)</span>
<span id="cb67-11"><a href="datenverarbeitung.html#cb67-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-12"><a href="datenverarbeitung.html#cb67-12" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(ds<span class="sc">$</span>sex)</span>
<span id="cb67-13"><a href="datenverarbeitung.html#cb67-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $levels</span></span>
<span id="cb67-14"><a href="datenverarbeitung.html#cb67-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;1&quot; &quot;2&quot;</span></span>
<span id="cb67-15"><a href="datenverarbeitung.html#cb67-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb67-16"><a href="datenverarbeitung.html#cb67-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb67-17"><a href="datenverarbeitung.html#cb67-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb67-18"><a href="datenverarbeitung.html#cb67-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb67-19"><a href="datenverarbeitung.html#cb67-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $labels</span></span>
<span id="cb67-20"><a href="datenverarbeitung.html#cb67-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MANN FRAU </span></span>
<span id="cb67-21"><a href="datenverarbeitung.html#cb67-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    1    2 </span></span>
<span id="cb67-22"><a href="datenverarbeitung.html#cb67-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb67-23"><a href="datenverarbeitung.html#cb67-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $label</span></span>
<span id="cb67-24"><a href="datenverarbeitung.html#cb67-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;GESCHLECHT, BEFRAGTE(R)&quot;</span></span></code></pre></div>
</div>
<div id="to_label" class="section level3 unnumbered">
<h3><code>To_label()</code></h3>
<p>Konvertiert einen Vektor in einen Faktor mit beschrifteten <code>levels</code>. Sinvoll bei binären Ausprägungsmerkmalen.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
to_label(datensatz$variable1, datensatz$variable2)

# Mit Pipe
datensatz %&gt;% 
  to_label(variable1, variable2)</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="datenverarbeitung.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Geschlecht in Faktor mit beschrifteten levels konvertieren</span></span>
<span id="cb69-2"><a href="datenverarbeitung.html#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="datenverarbeitung.html#cb69-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb69-4"><a href="datenverarbeitung.html#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb69-5"><a href="datenverarbeitung.html#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_label</span>(sex)</span>
<span id="cb69-6"><a href="datenverarbeitung.html#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="datenverarbeitung.html#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(ds<span class="sc">$</span>sex)</span>
<span id="cb69-8"><a href="datenverarbeitung.html#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $levels</span></span>
<span id="cb69-9"><a href="datenverarbeitung.html#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;MANN&quot; &quot;FRAU&quot;</span></span>
<span id="cb69-10"><a href="datenverarbeitung.html#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb69-11"><a href="datenverarbeitung.html#cb69-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb69-12"><a href="datenverarbeitung.html#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb69-13"><a href="datenverarbeitung.html#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb69-14"><a href="datenverarbeitung.html#cb69-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $label</span></span>
<span id="cb69-15"><a href="datenverarbeitung.html#cb69-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;GESCHLECHT, BEFRAGTE(R)&quot;</span></span></code></pre></div>
</div>
<div id="to_numeric" class="section level3 unnumbered">
<h3><code>To_numeric()</code></h3>
<p>Konvertiert einen Faktor oder <code>character</code> Vektor in einen numerischen Vektor.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
to_numeric(datensatz$variable1, datensatz$variable2)

# Mit Pipe
datensatz %&gt;% 
  to_numeric(variable1, variable2)</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="datenverarbeitung.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Geschlecht in Faktor </span></span>
<span id="cb71-2"><a href="datenverarbeitung.html#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="datenverarbeitung.html#cb71-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb71-4"><a href="datenverarbeitung.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb71-5"><a href="datenverarbeitung.html#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_factor</span>(sex)</span>
<span id="cb71-6"><a href="datenverarbeitung.html#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="datenverarbeitung.html#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Geschlecht wieder in numerischen Vektor konvertieren</span></span>
<span id="cb71-8"><a href="datenverarbeitung.html#cb71-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-9"><a href="datenverarbeitung.html#cb71-9" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb71-10"><a href="datenverarbeitung.html#cb71-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb71-11"><a href="datenverarbeitung.html#cb71-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_numeric</span>(sex)</span>
<span id="cb71-12"><a href="datenverarbeitung.html#cb71-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-13"><a href="datenverarbeitung.html#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ds<span class="sc">$</span>sex)</span>
<span id="cb71-14"><a href="datenverarbeitung.html#cb71-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numeric&quot;</span></span></code></pre></div>
</div>
<div id="to_character" class="section level3 unnumbered">
<h3><code>To_character()</code></h3>
<p>Konvertiert einen numerischen Vektor oder Faktor in einen <code>character</code> Vektor.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
to_character(datensatz$variable1, datensatz$variable2)

# Mit Pipe
datensatz %&gt;% 
  to_character(variable1, variable2)</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="datenverarbeitung.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Geschlecht in character Vektor konvertieren</span></span>
<span id="cb73-2"><a href="datenverarbeitung.html#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="datenverarbeitung.html#cb73-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb73-4"><a href="datenverarbeitung.html#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb73-5"><a href="datenverarbeitung.html#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_character</span>(sex)</span>
<span id="cb73-6"><a href="datenverarbeitung.html#cb73-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-7"><a href="datenverarbeitung.html#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ds<span class="sc">$</span>sex)</span>
<span id="cb73-8"><a href="datenverarbeitung.html#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;character&quot;</span></span>
<span id="cb73-9"><a href="datenverarbeitung.html#cb73-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-10"><a href="datenverarbeitung.html#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Folge: Alle numerischen Ausprägungsmerkmale wurden in ihre Beschriftung umgewandelt</span></span>
<span id="cb73-11"><a href="datenverarbeitung.html#cb73-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-12"><a href="datenverarbeitung.html#cb73-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ds<span class="sc">$</span>sex)</span>
<span id="cb73-13"><a href="datenverarbeitung.html#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:3477] &quot;MANN&quot; &quot;FRAU&quot; &quot;MANN&quot; &quot;MANN&quot; &quot;FRAU&quot; &quot;MANN&quot; &quot;FRAU&quot; &quot;MANN&quot; ...</span></span>
<span id="cb73-14"><a href="datenverarbeitung.html#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  - attr(*, &quot;label&quot;)= chr &quot;GESCHLECHT, BEFRAGTE(R)&quot;</span></span></code></pre></div>
</div>
<div id="numeric_to_factor" class="section level3 unnumbered">
<h3><code>Numeric_to_factor()</code></h3>
<p>Diese Funktion ermöglicht es uns alle Variablen eines Datensatzes anzuwählen und diese zu einem Faktor zu konvertieren. Wir müssen lediglich eine Maximalgrenze (n) als gewünschten Grenzwert zur Umwandlung angeben. Hat eine Variable weniger oder gleich viele Ausprägungsmerkmale wird sie konvertiert.</p>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="datenverarbeitung.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datensatz als Ausgangspunkt </span></span>
<span id="cb74-2"><a href="datenverarbeitung.html#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="datenverarbeitung.html#cb74-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb74-4"><a href="datenverarbeitung.html#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19<span class="sc">:</span>im21, id01)</span>
<span id="cb74-5"><a href="datenverarbeitung.html#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="datenverarbeitung.html#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ds<span class="sc">$</span>im19)</span>
<span id="cb74-7"><a href="datenverarbeitung.html#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numeric&quot;</span></span>
<span id="cb74-8"><a href="datenverarbeitung.html#cb74-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-9"><a href="datenverarbeitung.html#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Alle Variablen haben nur bis zu vier Ausprägungsmerkmale</span></span>
<span id="cb74-10"><a href="datenverarbeitung.html#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Wir können sie entsprechend zu Faktoren konvertieren</span></span>
<span id="cb74-11"><a href="datenverarbeitung.html#cb74-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ACHTUNG: Diese Funktion ändert den Datentyp unseres Datensatzes! </span></span>
<span id="cb74-12"><a href="datenverarbeitung.html#cb74-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wir geben also zusätzliche die Funktion tibble() an</span></span>
<span id="cb74-13"><a href="datenverarbeitung.html#cb74-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-14"><a href="datenverarbeitung.html#cb74-14" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb74-15"><a href="datenverarbeitung.html#cb74-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">numeric_to_factor</span>(<span class="at">n =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb74-16"><a href="datenverarbeitung.html#cb74-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>()</span>
<span id="cb74-17"><a href="datenverarbeitung.html#cb74-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-18"><a href="datenverarbeitung.html#cb74-18" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ds<span class="sc">$</span>im19)</span>
<span id="cb74-19"><a href="datenverarbeitung.html#cb74-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span></code></pre></div>
<p><strong>Wichtig!</strong> Die Funktion <code>numeric_to_factor()</code> hat die gleiche Wirkung wie die Funktion <code>to_label()</code>. Wir sparen uns lediglich den Aufwand jede Variable einzeln anzuwählen.</p>
</div>
<div id="unlabel" class="section level3 unnumbered">
<h3><code>Unlabel()</code></h3>
<p>Mit dieser Funktion können wir Variablen konvertieren, die als <code>labelled class</code> gespeichert wurden. Durch das Einlesen unseres Datensatzes über <code>read_spss()</code> werden wir diesen Befehl praktisch nie brauchen. Sollte wir den Datensatz aber über <code>haven</code> mit der Funktion <code>read_sav()</code> laden, ist es sinnvoll alle Variablen nach der Bearbeitung in eine <code>atomare Struktur</code> umzuwandeln - damit lassen sich spätere Probleme mit zusätzlichen Packeten vorbeugen.</p>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="datenverarbeitung.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datensatz laden und vorbereiten</span></span>
<span id="cb75-2"><a href="datenverarbeitung.html#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="datenverarbeitung.html#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb75-4"><a href="datenverarbeitung.html#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb75-5"><a href="datenverarbeitung.html#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;haven&#39;</span></span>
<span id="cb75-6"><a href="datenverarbeitung.html#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:sjlabelled&#39;:</span></span>
<span id="cb75-7"><a href="datenverarbeitung.html#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb75-8"><a href="datenverarbeitung.html#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     as_factor, read_sas, read_spss, read_stata, write_sas, zap_labels</span></span>
<span id="cb75-9"><a href="datenverarbeitung.html#cb75-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-10"><a href="datenverarbeitung.html#cb75-10" aria-hidden="true" tabindex="-1"></a>allbus2018_haven <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">&quot;ALLB2018.sav&quot;</span>)</span>
<span id="cb75-11"><a href="datenverarbeitung.html#cb75-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-12"><a href="datenverarbeitung.html#cb75-12" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018_haven <span class="sc">%&gt;%</span> </span>
<span id="cb75-13"><a href="datenverarbeitung.html#cb75-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, im19<span class="sc">:</span>im21, id01, german, sex)</span>
<span id="cb75-14"><a href="datenverarbeitung.html#cb75-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-15"><a href="datenverarbeitung.html#cb75-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Beispiel</span></span>
<span id="cb75-16"><a href="datenverarbeitung.html#cb75-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-17"><a href="datenverarbeitung.html#cb75-17" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ds<span class="sc">$</span>age)</span>
<span id="cb75-18"><a href="datenverarbeitung.html#cb75-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;double&quot;</span></span>
<span id="cb75-19"><a href="datenverarbeitung.html#cb75-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-20"><a href="datenverarbeitung.html#cb75-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Wir konvertieren alle Variablen</span></span>
<span id="cb75-21"><a href="datenverarbeitung.html#cb75-21" aria-hidden="true" tabindex="-1"></a><span class="co"># ACHTUNG: Diese Funktion ändert den Datentyp unseres Datensatzes! </span></span>
<span id="cb75-22"><a href="datenverarbeitung.html#cb75-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Wir geben also zusätzliche die Funktion tibble() an</span></span>
<span id="cb75-23"><a href="datenverarbeitung.html#cb75-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-24"><a href="datenverarbeitung.html#cb75-24" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb75-25"><a href="datenverarbeitung.html#cb75-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlabel</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb75-26"><a href="datenverarbeitung.html#cb75-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>()</span>
<span id="cb75-27"><a href="datenverarbeitung.html#cb75-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-28"><a href="datenverarbeitung.html#cb75-28" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ds<span class="sc">$</span>age)</span>
<span id="cb75-29"><a href="datenverarbeitung.html#cb75-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numeric&quot;</span></span></code></pre></div>
</div>
<div id="ref_lvl" class="section level3 unnumbered">
<h3><code>Ref_lvl()</code></h3>
<p>Die Verwendung der Funktion <code>rev_lvl()</code> aus <em>sjmisc</em> hat den großen Vorteil, dass unser Faktor im Gegensatz zur Funktion <code>relevel()</code> rekodiert wird und damit alle Beschriftungen auch bei numerischen <code>levels</code> richtig zugewiesen werden können.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
rev_lvl(datensatz, variable1, lvl = 3)

# Mit Pipe
datensatz %&gt;% 
  ref_lvl(variable1, lvl = 3)</code></pre>
<p>Wir ändern mit der Funktion <code>ref_lvl()</code> die Referenzkategorie von <code>variable1</code> auf das Ausprägungsmerkmal <code>3</code>.</p>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="datenverarbeitung.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Geschlecht als Faktor</span></span>
<span id="cb77-2"><a href="datenverarbeitung.html#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="datenverarbeitung.html#cb77-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb77-4"><a href="datenverarbeitung.html#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb77-5"><a href="datenverarbeitung.html#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_factor</span>(sex)</span>
<span id="cb77-6"><a href="datenverarbeitung.html#cb77-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-7"><a href="datenverarbeitung.html#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Unsere Refrenzkategorie ist gegenwärtig &quot;Mann&quot;</span></span>
<span id="cb77-8"><a href="datenverarbeitung.html#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(ds<span class="sc">$</span>sex)</span>
<span id="cb77-9"><a href="datenverarbeitung.html#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $levels</span></span>
<span id="cb77-10"><a href="datenverarbeitung.html#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;1&quot; &quot;2&quot;</span></span>
<span id="cb77-11"><a href="datenverarbeitung.html#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb77-12"><a href="datenverarbeitung.html#cb77-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb77-13"><a href="datenverarbeitung.html#cb77-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb77-14"><a href="datenverarbeitung.html#cb77-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb77-15"><a href="datenverarbeitung.html#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $labels</span></span>
<span id="cb77-16"><a href="datenverarbeitung.html#cb77-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; MANN FRAU </span></span>
<span id="cb77-17"><a href="datenverarbeitung.html#cb77-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    1    2 </span></span>
<span id="cb77-18"><a href="datenverarbeitung.html#cb77-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb77-19"><a href="datenverarbeitung.html#cb77-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $label</span></span>
<span id="cb77-20"><a href="datenverarbeitung.html#cb77-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;GESCHLECHT, BEFRAGTE(R)&quot;</span></span>
<span id="cb77-21"><a href="datenverarbeitung.html#cb77-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-22"><a href="datenverarbeitung.html#cb77-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Wir ändern die Refrenkategorie folgend auf &quot;Frau&quot;</span></span>
<span id="cb77-23"><a href="datenverarbeitung.html#cb77-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-24"><a href="datenverarbeitung.html#cb77-24" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb77-25"><a href="datenverarbeitung.html#cb77-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ref_lvl</span>(sex, <span class="at">lvl =</span> <span class="dv">2</span>)</span>
<span id="cb77-26"><a href="datenverarbeitung.html#cb77-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-27"><a href="datenverarbeitung.html#cb77-27" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(ds<span class="sc">$</span>sex)</span>
<span id="cb77-28"><a href="datenverarbeitung.html#cb77-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $levels</span></span>
<span id="cb77-29"><a href="datenverarbeitung.html#cb77-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;1&quot; &quot;2&quot;</span></span>
<span id="cb77-30"><a href="datenverarbeitung.html#cb77-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb77-31"><a href="datenverarbeitung.html#cb77-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $class</span></span>
<span id="cb77-32"><a href="datenverarbeitung.html#cb77-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb77-33"><a href="datenverarbeitung.html#cb77-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb77-34"><a href="datenverarbeitung.html#cb77-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $label</span></span>
<span id="cb77-35"><a href="datenverarbeitung.html#cb77-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;GESCHLECHT, BEFRAGTE(R)&quot;</span></span>
<span id="cb77-36"><a href="datenverarbeitung.html#cb77-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb77-37"><a href="datenverarbeitung.html#cb77-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $labels</span></span>
<span id="cb77-38"><a href="datenverarbeitung.html#cb77-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; FRAU MANN </span></span>
<span id="cb77-39"><a href="datenverarbeitung.html#cb77-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    1    2</span></span></code></pre></div>
</div>
</div>
<div id="daten-beschriften" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Daten beschriften</h2>
<p>Grundständig kennt R keine beschrifteten Daten. Erst durch den zunehmenden Einfluss sozialwisschenschaftlicher Anwendungsbedürfnisse und der bevorzugten Datenformate (.sav, .dta, .sas) halten Datenbeschriftungen auch in die R-Umgebung Einzug.</p>
<table>
<thead>
<tr class="header">
<th align="left">Packet</th>
<th align="left">Funktion</th>
<th align="left">Verwendung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">sjlabelled</td>
<td align="left">get_label()</td>
<td align="left">Ruft Variablenbeschriftung ab</td>
</tr>
<tr class="even">
<td align="left">sjlabelled</td>
<td align="left">get_labels()</td>
<td align="left">Ruft Beschriftung von Ausprägungsmerkmalen ab</td>
</tr>
<tr class="odd">
<td align="left">sjlabelled</td>
<td align="left">remove_label()</td>
<td align="left">Entfernt Variablenbeschriftung</td>
</tr>
<tr class="even">
<td align="left">sjlabelled</td>
<td align="left">remove_labels()</td>
<td align="left">Entfernt Beschriftung von Ausprägungsmerkmalen</td>
</tr>
<tr class="odd">
<td align="left">sjlabelled</td>
<td align="left">remove_all_labels()</td>
<td align="left">Entfernt alle Beschriftungen</td>
</tr>
<tr class="even">
<td align="left">sjlabelled</td>
<td align="left">var_labels()</td>
<td align="left">Variable neubeschriften</td>
</tr>
<tr class="odd">
<td align="left">sjlabelled</td>
<td align="left">val_labels()</td>
<td align="left">Ausprägungsmerkmale neubeschriften</td>
</tr>
<tr class="even">
<td align="left">sjlabelled</td>
<td align="left">drop_labels()</td>
<td align="left">Alle “unbesetzten” Ausprägungsmerkmale löschen</td>
</tr>
</tbody>
</table>
<p>*Die Funktion <code>drop_labels()</code> ist äquivalent zum Argument <code>drop.labels = T</code> in der Funktion <code>read_spss()</code>. Sofern Sie ihre Daten mit <code>read_sav()</code> eingelesen haben, können Sie diesen Befehl nach der Bearbeitung ihres Datensatzes zur Löschung überflüssiger Merkmalsausprägungen nutzen.</p>
<div id="get_label" class="section level3 unnumbered">
<h3><code>Get_label()</code></h3>
<p>Mit der Funktion <code>get_label()</code> können wir Variablenbeschriftungen abrufen.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
get_label(datensatz, variable1)

# Mit Pipe
datensatz %&gt;% 
  get_label(variable1)</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="datenverarbeitung.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variablenbeschriftung Leistungsprinzip (im19) </span></span>
<span id="cb79-2"><a href="datenverarbeitung.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="co"># und Befürwortung von Ungleichheit (im20)</span></span>
<span id="cb79-3"><a href="datenverarbeitung.html#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="datenverarbeitung.html#cb79-4" aria-hidden="true" tabindex="-1"></a>allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb79-5"><a href="datenverarbeitung.html#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>(im19, im20)</span>
<span id="cb79-6"><a href="datenverarbeitung.html#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                     im19 </span></span>
<span id="cb79-7"><a href="datenverarbeitung.html#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &quot;EINKOMMENSDIFFERENZ ERHOEHT MOTIVATION&quot; </span></span>
<span id="cb79-8"><a href="datenverarbeitung.html#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                     im20 </span></span>
<span id="cb79-9"><a href="datenverarbeitung.html#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       &quot;RANGUNTERSCHIEDE SIND AKZEPTABEL&quot;</span></span></code></pre></div>
</div>
<div id="get_labels" class="section level3 unnumbered">
<h3><code>Get_labels()</code></h3>
<p>Die Funktion <code>get_labels()</code> erlaubt uns das Abrufen der Beschriftung von Merkmalsausprägungen.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
get_labels(datensatz, variable1)

# Nicht mit Pipe möglich!</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="datenverarbeitung.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Beschriftung der Ausprägungsmerkmale - Leistungsprinzip (im19) </span></span>
<span id="cb81-2"><a href="datenverarbeitung.html#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="datenverarbeitung.html#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="fu">get_labels</span>(allbus2018<span class="sc">$</span>im19)</span>
<span id="cb81-4"><a href="datenverarbeitung.html#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;STIMME VOLL ZU&quot;       &quot;STIMME EHER ZU&quot;       &quot;STIMME EHER NICHT ZU&quot;</span></span>
<span id="cb81-5"><a href="datenverarbeitung.html#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] &quot;STIMME GAR NICHT ZU&quot;</span></span></code></pre></div>
</div>
<div id="remove_label" class="section level3 unnumbered">
<h3><code>Remove_label()</code></h3>
<p>Über die Funktion <code>remove_label()</code> lassen sich gezielt Variablenbeschriftungen von einzelnen Variablen oder allen Variablen im Datensatz entfernen.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Einzelne Variable
# Ohne Pipe
remove_label(datensatz, variable1)

# Mit Pipe
datensatz %&gt;%
  remove_label(variable1)
  
# ---------
  
# Ganzer Datensatz
# Ohne Pipe
remove_label(datensatz)

# Mit Pipe
datensatz %&gt;%
  remove_label()</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="datenverarbeitung.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Löschung der Variablenbeschriftung - Geschlecht</span></span>
<span id="cb83-2"><a href="datenverarbeitung.html#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="datenverarbeitung.html#cb83-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb83-4"><a href="datenverarbeitung.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb83-5"><a href="datenverarbeitung.html#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_label</span>(sex)</span>
<span id="cb83-6"><a href="datenverarbeitung.html#cb83-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-7"><a href="datenverarbeitung.html#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Variablenbeschriftung wurde gelöscht</span></span>
<span id="cb83-8"><a href="datenverarbeitung.html#cb83-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-9"><a href="datenverarbeitung.html#cb83-9" aria-hidden="true" tabindex="-1"></a>ds <span class="sc">%&gt;%</span> </span>
<span id="cb83-10"><a href="datenverarbeitung.html#cb83-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>(sex)</span>
<span id="cb83-11"><a href="datenverarbeitung.html#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; sex </span></span>
<span id="cb83-12"><a href="datenverarbeitung.html#cb83-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  &quot;&quot;</span></span>
<span id="cb83-13"><a href="datenverarbeitung.html#cb83-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-14"><a href="datenverarbeitung.html#cb83-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Löschung aller Variablenbeschriftungen im Datensatz</span></span>
<span id="cb83-15"><a href="datenverarbeitung.html#cb83-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-16"><a href="datenverarbeitung.html#cb83-16" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb83-17"><a href="datenverarbeitung.html#cb83-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19, im20) <span class="sc">%&gt;%</span> </span>
<span id="cb83-18"><a href="datenverarbeitung.html#cb83-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_label</span>()</span>
<span id="cb83-19"><a href="datenverarbeitung.html#cb83-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-20"><a href="datenverarbeitung.html#cb83-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Variablenbeschriftungen wurden gelöscht</span></span>
<span id="cb83-21"><a href="datenverarbeitung.html#cb83-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-22"><a href="datenverarbeitung.html#cb83-22" aria-hidden="true" tabindex="-1"></a>ds <span class="sc">%&gt;%</span> </span>
<span id="cb83-23"><a href="datenverarbeitung.html#cb83-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>(im19, im20)</span>
<span id="cb83-24"><a href="datenverarbeitung.html#cb83-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; im19 im20 </span></span>
<span id="cb83-25"><a href="datenverarbeitung.html#cb83-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &quot;&quot;   &quot;&quot;</span></span></code></pre></div>
</div>
<div id="remove_labels" class="section level3 unnumbered">
<h3><code>Remove_labels()</code></h3>
<p>Die Funktion <code>remove_labels()</code> erlaubt es uns gezielt Beschriftungen der Ausprägungsmerkmale von einzelnen Variablen oder allen Variablen im Datensatz zu löschen.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
remove_labels(datensatz, variable1)

# Mit Pipe
datensatz %&gt;%
  remove_labels(variable1)
  
# ---------
  
# Ganzer Datensatz
# Ohne Pipe
remove_labels(datensatz)

# Mit Pipe
datensatz %&gt;%
  remove_labels()</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="datenverarbeitung.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Löschung der Variablenbeschriftung - Geschlecht</span></span>
<span id="cb85-2"><a href="datenverarbeitung.html#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="datenverarbeitung.html#cb85-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb85-4"><a href="datenverarbeitung.html#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19) <span class="sc">%&gt;%</span> </span>
<span id="cb85-5"><a href="datenverarbeitung.html#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_labels</span>(im19, <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</span>
<span id="cb85-6"><a href="datenverarbeitung.html#cb85-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-7"><a href="datenverarbeitung.html#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Variablenbeschriftung wurde gelöscht</span></span>
<span id="cb85-8"><a href="datenverarbeitung.html#cb85-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-9"><a href="datenverarbeitung.html#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="fu">get_labels</span>(ds<span class="sc">$</span>im19)</span>
<span id="cb85-10"><a href="datenverarbeitung.html#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb85-11"><a href="datenverarbeitung.html#cb85-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-12"><a href="datenverarbeitung.html#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Löschung aller Variablenbeschriftungen im Datensatz</span></span>
<span id="cb85-13"><a href="datenverarbeitung.html#cb85-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-14"><a href="datenverarbeitung.html#cb85-14" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb85-15"><a href="datenverarbeitung.html#cb85-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19, im20) <span class="sc">%&gt;%</span> </span>
<span id="cb85-16"><a href="datenverarbeitung.html#cb85-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_labels</span>(<span class="at">labels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">99</span>)</span>
<span id="cb85-17"><a href="datenverarbeitung.html#cb85-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-18"><a href="datenverarbeitung.html#cb85-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Variablenbeschriftungen wurden gelöscht</span></span>
<span id="cb85-19"><a href="datenverarbeitung.html#cb85-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-20"><a href="datenverarbeitung.html#cb85-20" aria-hidden="true" tabindex="-1"></a><span class="fu">get_labels</span>(ds<span class="sc">$</span>im19)</span>
<span id="cb85-21"><a href="datenverarbeitung.html#cb85-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb85-22"><a href="datenverarbeitung.html#cb85-22" aria-hidden="true" tabindex="-1"></a><span class="fu">get_labels</span>(ds<span class="sc">$</span>im20)</span>
<span id="cb85-23"><a href="datenverarbeitung.html#cb85-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
<div id="remove_all_labels" class="section level3 unnumbered">
<h3><code>Remove_all_labels()</code></h3>
<p>Wir können mit der Funktion <code>remove_all_labels()</code> <strong>alle</strong> (Variablenbeschriftungen und Beschriftungen von Merkmalsausprägungen) löschen.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
remove_all_labels(datensatz, variable1)

# Mit Pipe
datensatz %&gt;% 
  remove_all_labels(variable1)</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="datenverarbeitung.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Löschung aller Beschriftungen in einem Datensatz</span></span>
<span id="cb87-2"><a href="datenverarbeitung.html#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="datenverarbeitung.html#cb87-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb87-4"><a href="datenverarbeitung.html#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19, im20) <span class="sc">%&gt;%</span> </span>
<span id="cb87-5"><a href="datenverarbeitung.html#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_all_labels</span>()</span>
<span id="cb87-6"><a href="datenverarbeitung.html#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="datenverarbeitung.html#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Variablenbeschriftungen wurden gelöscht</span></span>
<span id="cb87-8"><a href="datenverarbeitung.html#cb87-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-9"><a href="datenverarbeitung.html#cb87-9" aria-hidden="true" tabindex="-1"></a>ds <span class="sc">%&gt;%</span> </span>
<span id="cb87-10"><a href="datenverarbeitung.html#cb87-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>(im19, im20) </span>
<span id="cb87-11"><a href="datenverarbeitung.html#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; im19 im20 </span></span>
<span id="cb87-12"><a href="datenverarbeitung.html#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &quot;&quot;   &quot;&quot;</span></span>
<span id="cb87-13"><a href="datenverarbeitung.html#cb87-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-14"><a href="datenverarbeitung.html#cb87-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Beschriftung von Ausprägungsmerkmalen wurden gelöscht</span></span>
<span id="cb87-15"><a href="datenverarbeitung.html#cb87-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-16"><a href="datenverarbeitung.html#cb87-16" aria-hidden="true" tabindex="-1"></a><span class="fu">get_labels</span>(ds<span class="sc">$</span>im19)</span>
<span id="cb87-17"><a href="datenverarbeitung.html#cb87-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb87-18"><a href="datenverarbeitung.html#cb87-18" aria-hidden="true" tabindex="-1"></a><span class="fu">get_labels</span>(ds<span class="sc">$</span>im20)</span>
<span id="cb87-19"><a href="datenverarbeitung.html#cb87-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
<div id="var_labels" class="section level3 unnumbered">
<h3><code>Var_labels()</code></h3>
<p>Mit der Funktion <code>var_labels()</code> können für von einer oder mehreren Variablen die Variablenbeschriftung neu definieren.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
var_labels(datensatz, variable1 = &quot;Variablenbeschriftung&quot;)

# Mit Pipe
datensatz %&gt;% 
  var_labels(variable1 = &quot;Variablenbeschriftung&quot;)</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="datenverarbeitung.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variablenbeschriftung neu definieren</span></span>
<span id="cb89-2"><a href="datenverarbeitung.html#cb89-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-3"><a href="datenverarbeitung.html#cb89-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb89-4"><a href="datenverarbeitung.html#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var_labels</span>(<span class="at">im19 =</span> <span class="st">&quot;Leistungsprinzip&quot;</span>,</span>
<span id="cb89-5"><a href="datenverarbeitung.html#cb89-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">im20 =</span> <span class="st">&quot;Befürwortung von Ungleichheit&quot;</span>)</span>
<span id="cb89-6"><a href="datenverarbeitung.html#cb89-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-7"><a href="datenverarbeitung.html#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Variablenbeschriftungen abrufen</span></span>
<span id="cb89-8"><a href="datenverarbeitung.html#cb89-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-9"><a href="datenverarbeitung.html#cb89-9" aria-hidden="true" tabindex="-1"></a>ds <span class="sc">%&gt;%</span> </span>
<span id="cb89-10"><a href="datenverarbeitung.html#cb89-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>(im19, im20)</span>
<span id="cb89-11"><a href="datenverarbeitung.html#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                            im19                            im20 </span></span>
<span id="cb89-12"><a href="datenverarbeitung.html#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              &quot;Leistungsprinzip&quot; &quot;Befürwortung von Ungleichheit&quot;</span></span></code></pre></div>
</div>
<div id="val_labels" class="section level3 unnumbered">
<h3><code>Val_labels()</code></h3>
<p>Die Funktion <code>val_labels()</code> erlaubt es uns Ausprägungsmerkmale für eine oder mehrere Variablen neu zu definieren.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
var_labels(datensatz, variable1 = c(&quot;1&quot;, &quot;2&quot;))

# Mit Pipe
datensatz %&gt;% 
  var_labels(variable1 = c(&quot;1&quot;, &quot;2&quot;),
             variable2 = c(&quot;Hallo&quot;, &quot;Tschüss&quot;))</code></pre>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="datenverarbeitung.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merkmalsausprägungen neu definieren</span></span>
<span id="cb91-2"><a href="datenverarbeitung.html#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="datenverarbeitung.html#cb91-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb91-4"><a href="datenverarbeitung.html#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">val_labels</span>(<span class="at">im19 =</span> <span class="fu">c</span>(<span class="st">&quot;Erste Stufe&quot;</span>, <span class="st">&quot;Zweite Stufe&quot;</span>, <span class="st">&quot;Dritte Stufe&quot;</span>, <span class="st">&quot;Vierte Stufe&quot;</span>),</span>
<span id="cb91-5"><a href="datenverarbeitung.html#cb91-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">im20 =</span> <span class="fu">c</span>(<span class="st">&quot;Erste Stufe&quot;</span>, <span class="st">&quot;Zweite Stufe&quot;</span>, <span class="st">&quot;Dritte Stufe&quot;</span>, <span class="st">&quot;Vierte Stufe&quot;</span>))</span>
<span id="cb91-6"><a href="datenverarbeitung.html#cb91-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-7"><a href="datenverarbeitung.html#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="fu">get_labels</span>(ds<span class="sc">$</span>im19)</span>
<span id="cb91-8"><a href="datenverarbeitung.html#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Erste Stufe&quot;  &quot;Zweite Stufe&quot; &quot;Dritte Stufe&quot; &quot;Vierte Stufe&quot;</span></span>
<span id="cb91-9"><a href="datenverarbeitung.html#cb91-9" aria-hidden="true" tabindex="-1"></a><span class="fu">get_labels</span>(ds<span class="sc">$</span>im20)</span>
<span id="cb91-10"><a href="datenverarbeitung.html#cb91-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Erste Stufe&quot;  &quot;Zweite Stufe&quot; &quot;Dritte Stufe&quot; &quot;Vierte Stufe&quot;</span></span>
<span id="cb91-11"><a href="datenverarbeitung.html#cb91-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-12"><a href="datenverarbeitung.html#cb91-12" aria-hidden="true" tabindex="-1"></a>ds <span class="sc">%&gt;%</span> </span>
<span id="cb91-13"><a href="datenverarbeitung.html#cb91-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(im19, im20) <span class="sc">%&gt;%</span> </span>
<span id="cb91-14"><a href="datenverarbeitung.html#cb91-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">view_df</span>()</span></code></pre></div>
<table style="border-collapse:collapse; border:none;">
<caption>
Data frame: .
</caption>
<tr>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
ID
</th>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
Name
</th>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
Label
</th>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
Values
</th>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
Value Labels
</th>
</tr>
<tr>
<td style="padding:0.2cm; text-align:left; vertical-align:top;">
1
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top;">
im19
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top;">
Leistungsprinzip
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top;">
1<br>2<br>3<br>4
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top;">
Erste Stufe<br>Zweite Stufe<br>Dritte Stufe<br>Vierte Stufe
</td>
</tr>
<tr>
<td style="padding:0.2cm; text-align:left; vertical-align:top; background-color:#eeeeee">
2
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top; background-color:#eeeeee">
im20
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top; background-color:#eeeeee">
Befürwortung von Ungleichheit
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top; background-color:#eeeeee">
1<br>2<br>3<br>4
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top; background-color:#eeeeee">
Erste Stufe<br>Zweite Stufe<br>Dritte Stufe<br>Vierte Stufe
</td>
</tr>
</table>
</div>
</div>
<div id="daten-manipulieren" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Daten manipulieren</h2>
<p>Zur Manipulation/Bearbeitung unseres Datensatzes werden wir maßgeblich mit dem <code>dplyr</code>-Packet aus dem tidyverse und dem Packet <code>sjmisc</code> aus <code>strengejacke</code> arbeiten. Die folgende Auswahl kann nur einen Überblick über die “wichtigsten” Funktionen dieser Packete geben. Sofern Sie weitere Tranformationswünsche haben, sollten Sie unbedingt die Entwicklerseiten dieser Packete aufsuchen und nach geeigneten Funktionen suchen (siehe 1.6).</p>
<table>
<colgroup>
<col width="27%" />
<col width="23%" />
<col width="49%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Packet</th>
<th align="left">Funktion</th>
<th align="left">Verwendung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dplyr</td>
<td align="left">rename()</td>
<td align="left">Umbenennen von Variablen</td>
</tr>
<tr class="even">
<td align="left">dplyr</td>
<td align="left">mutate()</td>
<td align="left">Erstellen und verändern von vorhandenen Variablen</td>
</tr>
<tr class="odd">
<td align="left">dplyr</td>
<td align="left">group_by()</td>
<td align="left">Erstellt Gruppen (Teilmengen)</td>
</tr>
<tr class="even">
<td align="left">dplyr</td>
<td align="left">summarize()</td>
<td align="left">Daten zusammenfassen</td>
</tr>
<tr class="odd">
<td align="left">dplyr</td>
<td align="left">distinct()</td>
<td align="left">Auswahl einzigartiger Werte</td>
</tr>
<tr class="even">
<td align="left">dplyr</td>
<td align="left">case_when()</td>
<td align="left">Vektorisierter if-Befehl</td>
</tr>
<tr class="odd">
<td align="left">sjmisc</td>
<td align="left">rec()</td>
<td align="left">Rekodierung von Variablen</td>
</tr>
<tr class="even">
<td align="left">sjmisc</td>
<td align="left">std()</td>
<td align="left">Z-Standardisierung von Variablen</td>
</tr>
<tr class="odd">
<td align="left">sjmisc</td>
<td align="left">center()</td>
<td align="left">Zentrierung von Variablen am Mittelwert</td>
</tr>
<tr class="even">
<td align="left">sjmisc</td>
<td align="left">split_var()</td>
<td align="left">Aufspaltung von Variablen in n Gruppen</td>
</tr>
<tr class="odd">
<td align="left">sjmisc</td>
<td align="left">group_var()</td>
<td align="left">Aufspaltung von Variablen in Gruppen gleicher Spannweite</td>
</tr>
<tr class="even">
<td align="left">sjmisc</td>
<td align="left">row_count()</td>
<td align="left">Zählung von Zeilenwerten</td>
</tr>
<tr class="odd">
<td align="left">sjmisc</td>
<td align="left">col_count()</td>
<td align="left">Zählung von Spaltenweten</td>
</tr>
<tr class="even">
<td align="left">sjmisc</td>
<td align="left">row_sums()</td>
<td align="left">Summe der Zeilenwerte</td>
</tr>
<tr class="odd">
<td align="left">sjmisc</td>
<td align="left">row_means()</td>
<td align="left">Mittelwert der Zeilenwerte</td>
</tr>
<tr class="even">
<td align="left">sjlabelled</td>
<td align="left">set_na()</td>
<td align="left">Transformiert Ausprägungsmerkmale zu fehlenden Werten</td>
</tr>
<tr class="odd">
<td align="left">tidyr</td>
<td align="left">drop_na()</td>
<td align="left">Alle fehlenden Werte werden gelöscht</td>
</tr>
</tbody>
</table>
<div id="rename" class="section level3 unnumbered">
<h3><code>Rename()</code></h3>
<p>Die Funktion <code>rename()</code> erlaubt uns eine Neubeschriftung der Variablennamen vorzunehmen.</p>
<p><strong>Wichtig!</strong> Die nicht umbenannten Variablen verbleiben auch weiterhin im Datensatz.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
rename(datensatz, rename(variableA = variable1))

# Mit Pipe
datensatz %&gt;% 
  rename(variableA = variable1)</code></pre>
<p>Mit dem Befehl <code>rename()</code> haben wir in unserem Datensatz <code>ds</code> die Variable <code>variable1</code> in <code>variableA</code> umbenannt. Der neue Name muss folgend immer auf der <em>linken</em> Seite der Gleichung stehen.</p>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="datenverarbeitung.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Neubeschriftung der Variablen Geschlecht (sex) und Alter (age)</span></span>
<span id="cb93-2"><a href="datenverarbeitung.html#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="datenverarbeitung.html#cb93-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span>  allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb93-4"><a href="datenverarbeitung.html#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex, age) <span class="sc">%&gt;%</span> </span>
<span id="cb93-5"><a href="datenverarbeitung.html#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Geschlecht =</span> sex,</span>
<span id="cb93-6"><a href="datenverarbeitung.html#cb93-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Alter =</span> age)</span>
<span id="cb93-7"><a href="datenverarbeitung.html#cb93-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-8"><a href="datenverarbeitung.html#cb93-8" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb93-9"><a href="datenverarbeitung.html#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,477 x 2</span></span>
<span id="cb93-10"><a href="datenverarbeitung.html#cb93-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Geschlecht Alter</span></span>
<span id="cb93-11"><a href="datenverarbeitung.html#cb93-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb93-12"><a href="datenverarbeitung.html#cb93-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1          1    62</span></span>
<span id="cb93-13"><a href="datenverarbeitung.html#cb93-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2          2    64</span></span>
<span id="cb93-14"><a href="datenverarbeitung.html#cb93-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3          1    22</span></span>
<span id="cb93-15"><a href="datenverarbeitung.html#cb93-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4          1    59</span></span>
<span id="cb93-16"><a href="datenverarbeitung.html#cb93-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5          2    30</span></span>
<span id="cb93-17"><a href="datenverarbeitung.html#cb93-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6          1    41</span></span>
<span id="cb93-18"><a href="datenverarbeitung.html#cb93-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7          2    43</span></span>
<span id="cb93-19"><a href="datenverarbeitung.html#cb93-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8          1    39</span></span>
<span id="cb93-20"><a href="datenverarbeitung.html#cb93-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9          2    40</span></span>
<span id="cb93-21"><a href="datenverarbeitung.html#cb93-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          2    69</span></span>
<span id="cb93-22"><a href="datenverarbeitung.html#cb93-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,467 more rows</span></span></code></pre></div>
</div>
<div id="mutate" class="section level3 unnumbered">
<h3><code>Mutate()</code></h3>
<p>Über die Funktion <code>mutate()</code> können wir neue Variablen aus schon bestehenden Variablen bilden. Vor allem erlaubt uns dieser Befehl mathematische Operationen an Variablen vorzunehmen. Wir kennen diese Befehl in <code>SPSS</code> als <code>compute</code>.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
mutate(datensatz, variable1 = variable1*100)

# Mit Pipe
datensatz %&gt;% 
  mutate(variable1 = variable1*100)</code></pre>
<p>In unserem Beispiel haben wir <code>variable1</code> mit dem Wert <code>100</code> multipliziert und das Ergebnis wieder in <code>variable1</code> gespeichert.</p>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="datenverarbeitung.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Berechung des Alters der Befragten aus ihrem Geburtsjahr in neuer Variable (Alter)</span></span>
<span id="cb95-2"><a href="datenverarbeitung.html#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="datenverarbeitung.html#cb95-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span>  allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb95-4"><a href="datenverarbeitung.html#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(yborn, age) <span class="sc">%&gt;%</span> </span>
<span id="cb95-5"><a href="datenverarbeitung.html#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Alter =</span> <span class="dv">2018</span><span class="sc">-</span>yborn)</span>
<span id="cb95-6"><a href="datenverarbeitung.html#cb95-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-7"><a href="datenverarbeitung.html#cb95-7" aria-hidden="true" tabindex="-1"></a>ds</span>
<span id="cb95-8"><a href="datenverarbeitung.html#cb95-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3,477 x 3</span></span>
<span id="cb95-9"><a href="datenverarbeitung.html#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    yborn   age Alter</span></span>
<span id="cb95-10"><a href="datenverarbeitung.html#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb95-11"><a href="datenverarbeitung.html#cb95-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1  1956    62    62</span></span>
<span id="cb95-12"><a href="datenverarbeitung.html#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2  1953    64    65</span></span>
<span id="cb95-13"><a href="datenverarbeitung.html#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3  1995    22    23</span></span>
<span id="cb95-14"><a href="datenverarbeitung.html#cb95-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4  1959    59    59</span></span>
<span id="cb95-15"><a href="datenverarbeitung.html#cb95-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5  1987    30    31</span></span>
<span id="cb95-16"><a href="datenverarbeitung.html#cb95-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6  1976    41    42</span></span>
<span id="cb95-17"><a href="datenverarbeitung.html#cb95-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7  1975    43    43</span></span>
<span id="cb95-18"><a href="datenverarbeitung.html#cb95-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8  1979    39    39</span></span>
<span id="cb95-19"><a href="datenverarbeitung.html#cb95-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9  1977    40    41</span></span>
<span id="cb95-20"><a href="datenverarbeitung.html#cb95-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  1949    69    69</span></span>
<span id="cb95-21"><a href="datenverarbeitung.html#cb95-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3,467 more rows</span></span>
<span id="cb95-22"><a href="datenverarbeitung.html#cb95-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-23"><a href="datenverarbeitung.html#cb95-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Fast ;D</span></span>
<span id="cb95-24"><a href="datenverarbeitung.html#cb95-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Um das korrekte Alter zu ermitteln, müssten wir natürlich noch den Geburtsmonat einbeziehen!</span></span></code></pre></div>
</div>
<div id="group_by" class="section level3 unnumbered">
<h3><code>Group_by()</code></h3>
</div>
<div id="set_na" class="section level3 unnumbered">
<h3><code>Set_na()</code></h3>
<p>Mit der Funktion <code>set_na()</code> wollen wir lernen, wie wir einzelne oder mehrere Ausprägungsmerkmale in <code>NA</code> konvertieren können.</p>
<p><strong>Syntax:</strong></p>
<pre><code># Ohne Pipe
set_na(datensatz, variable1, na = c(1, 3))

# Mit Pipe
datensatz %&gt;% 
  set_na(variable1, na = c(1, 3))</code></pre>
<p>Mit haben mit der Funktion <code>set_na()</code> in <code>variable1</code> die Ausprägungsmerkmale <code>1</code> und <code>3</code> als <code>NA</code> definiert.</p>
<p><strong>Beispielcode:</strong></p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="datenverarbeitung.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Definition der Altersspanne 61 bis 99 als NA</span></span>
<span id="cb97-2"><a href="datenverarbeitung.html#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="datenverarbeitung.html#cb97-3" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> allbus2018 <span class="sc">%&gt;%</span> </span>
<span id="cb97-4"><a href="datenverarbeitung.html#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb97-5"><a href="datenverarbeitung.html#cb97-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_na</span>(age, <span class="at">na =</span> <span class="dv">61</span><span class="sc">:</span><span class="dv">99</span>)</span>
<span id="cb97-6"><a href="datenverarbeitung.html#cb97-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-7"><a href="datenverarbeitung.html#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="fu">view_df</span>(ds)</span></code></pre></div>
<table style="border-collapse:collapse; border:none;">
<caption>
Data frame: ds
</caption>
<tr>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
ID
</th>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
Name
</th>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
Label
</th>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
Values
</th>
<th style="border-bottom:double; font-style:italic; font-weight:normal; padding:0.2cm; text-align:left; vertical-align:top;">
Value Labels
</th>
</tr>
<tr>
<td style="padding:0.2cm; text-align:left; vertical-align:top;">
1
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top;">
age
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top;">
ALTER: BEFRAGTE(R)
</td>
<td style="padding:0.2cm; text-align:left; vertical-align:top;" colspan="2">
<em>range: 18-60</em>
</td>
</tr>
</table>
<p><strong>Referenz:</strong></p>
<p><strong>Moosdorf, D. (2020):</strong> Kritik an sozialer Ungleichheit – Macht politisches Wissen den Unterschied?. In Tausendpfund, M. &amp; B. Westle (Hrsg.), Politisches Wissen in Deutschland: Empirische Analysen mit dem ALLBUS 2018 (S. 165–197). Wiesbaden: Springer VS. <a href="https://doi.org/10.1007/978-3-658-30492-8_6" class="uri">https://doi.org/10.1007/978-3-658-30492-8_6</a>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="programmiersprache-r.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
